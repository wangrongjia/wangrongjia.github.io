---
link: https://www.v2ex.com/t/1108788
site: V2EX
date: 2025-02-04T01:22
excerpt: ç¨‹åºå‘˜ - @CureDovahkiin - åœ¨é¡µé¢åŠ è½½å‰æ‹¦æˆª xhr å’Œ fetch
  å¯¹è±¡åŠ ä¸ªå“åº”æ‹¦æˆªå™¨ï¼Œå±è”½æ”¾åœ¨ç”¨æˆ·ä¿¡æ¯æµé‡Œé¢çš„å¹¿å‘Šï¼Œè¿”å›å¤„ç†åçš„æ•°æ®ï¼Œè¿˜èƒ½é¡ºä¾¿å±è”½ up ä¸»å‘çš„å¹¿å‘Šå±è”½ä¸€äº›è·Ÿè¸ªè„šæœ¬çš„è¯·æ±‚ï¼Œç„¶åä¸ä¼šåƒ ublo
twitter: https://twitter.com/@V2EX
slurped: 2025-02-14T09:03
title: æœ‰æ²¡æœ‰åŸºäºæ‹¦æˆªæµè§ˆå™¨è¯·æ±‚æ¥è¾¾æˆä¸€äº›äº‹æƒ…çš„æµè§ˆå™¨æ‰©å±• - V2EX
---
  
Â  [CureDovahkiin](/member/CureDovahkiin) Â· 10 å¤©å‰ Â· 2383 æ¬¡ç‚¹å‡»

åœ¨é¡µé¢åŠ è½½å‰æ‹¦æˆª xhr å’Œ fetch å¯¹è±¡

åŠ ä¸ªå“åº”æ‹¦æˆªå™¨ï¼Œå±è”½æ”¾åœ¨ç”¨æˆ·ä¿¡æ¯æµé‡Œé¢çš„å¹¿å‘Šï¼Œè¿”å›å¤„ç†åçš„æ•°æ®ï¼Œè¿˜èƒ½é¡ºä¾¿å±è”½ up ä¸»å‘çš„å¹¿å‘Š

å±è”½ä¸€äº›è·Ÿè¸ªè„šæœ¬çš„è¯·æ±‚ï¼Œç„¶åä¸ä¼šåƒ ublock ä¹‹ç±»çš„ç–¯ç‹‚åœ¨æ§åˆ¶å°æŠ¥é”™ï¼Œç›´æ¥æŠŠè¯·æ±‚åäº†ã€‚

[ä¹‹å‰å†™äº†ä¸€ä¸ª](https://github.com/shadowdreamer/jioben/blob/master/bilibili/bilibili-fetch-hijack.user.js) ä½†æ˜¯æ„Ÿè§‰ä¼šé‡å¤é€ è½®å­å°±å‡‘åˆç”¨æ²¡ç»§ç»­å†™ã€‚

å¦‚æœæ˜¯ä¸€ä¸ªæ‰©å±•ï¼Œæ„Ÿè§‰å¯ä»¥è®¢é˜…ä¸€äº›è¯·æ±‚å’Œå“åº”æ‹¦æˆªå™¨çš„è„šæœ¬å’Œè§„åˆ™ï¼Œä¸è¿‡åšèµ·æ¥å¥½éº»çƒ¦è¿˜æ˜¯ç®—äº†ğŸ¤“


19 æ¡å›å¤ Â **â€¢** Â 2025-02-05 09:22:15 +08:00

|   |   |   |
|---|---|---|
|![kk2syc](https://cdn.v2ex.com/avatar/7eac/ff4c/655410_normal.png?m=1734018023)||1<br><br>**[kk2syc](/member/kk2syc)** Â <br><br>Â  Â 10 å¤©å‰ Â  ![â¤ï¸](/static/img/heart_neue_red.png?v=16ec2dd0a880be6edda1e4a2e35754b3) 1<br><br>è¿™ä¹ˆå¤šå¹´äº†ï¼Œè¿˜æœ‰ä¸çŸ¥é“ tampermonkey çš„ï¼Ÿ|

|   |   |   |
|---|---|---|
|![lijiangang886](https://cdn.v2ex.com/gravatar/52ef5f4954cf1b0778a5694c7a8e4669?s=48&d=retro)||2<br><br>**[lijiangang886](/member/lijiangang886)** Â <br><br>Â  Â 10 å¤©å‰<br><br>æ²¡å»çº ç»†èŠ‚ï¼Œä¸æ˜¯è¯´ Chrome manifest V3 æŠŠè¿™ä¸ªåŠŸèƒ½å¹²åºŸäº†å—ï¼Ÿ|

|   |   |   |
|---|---|---|
|![foufoufm](https://cdn.v2ex.com/avatar/0484/763b/499086_normal.png?m=1733884433)||3<br><br>**[foufoufm](/member/foufoufm)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[kk2syc](/member/kk2syc) ä¸‹è½½äº†å¾ˆä¹…ï¼Œä½†æ˜¯ï¼Œæ²¡å•¥å¥½ç”¨çš„è„šæœ¬ã€‚ã€‚ã€‚|

|   |   |   |
|---|---|---|
|![whjlinyi](https://cdn.v2ex.com/gravatar/e8fadb9cdbb70525348272f204878d5d?s=48&d=retro)||4<br><br>**[whjlinyi](/member/whjlinyi)** Â <br><br>Â  Â 9 å¤©å‰ via iPhone<br><br>AdGuard|

|   |   |   |
|---|---|---|
|![CureDovahkiin](https://cdn.v2ex.com/gravatar/2ea98c6fd91d8a655144e37613586017?s=48&d=retro)||5<br><br>**[CureDovahkiin](/member/CureDovahkiin)** Â <br><br>OP<br><br>Â  Â 9 å¤©å‰<br><br>@[kk2syc](/member/kk2syc) æˆ‘å¯»æ€é‡Œé¢é“¾æ¥å°±æ˜¯æˆ‘å†™çš„ç”¨æˆ·è„šæœ¬å•Šï¼Œå°±æ˜¯é—®æœ‰æ²¡æœ‰ä¼˜åŒ–ä¸€ä¸‹åšæˆæ‰©å±•çš„|

|   |   |   |
|---|---|---|
|![klesh](https://cdn.v2ex.com/gravatar/43ab30c8f8abc821ccc4d89504a47935?s=48&d=retro)||6<br><br>**[klesh](/member/klesh)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[kk2syc](/member/kk2syc) tampermonkey èƒ½æ‹¦æˆª xhr å’Œ fetch å¯¹è±¡å—ï¼Ÿæœ‰æ²¡æœ‰ä¾‹å­åˆ†äº«ä¸€ä¸‹å‘€ï¼Ÿè°¢è°¢ã€‚|

|   |   |   |
|---|---|---|
|![Archeb](https://cdn.v2ex.com/gravatar/93f5d0e297fe1c30eb4cf540e214523a?s=48&d=retro)||7<br><br>**[Archeb](/member/Archeb)** Â <br><br>Â  Â 9 å¤©å‰<br><br>å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯æ²¡åŠæ³•ç›´æ¥æ³¨å…¥é¡µé¢æ‰éœ€è¦çš„è¯·æ±‚é‡å†™ï¼Œtampermonkey èƒ½ç›´æ¥æ³¨å…¥é¡µé¢è¿˜è´¹é‚£åŠ²é‡å†™å¹²å˜›|

|   |   |   |
|---|---|---|
|![abccccabc](https://cdn.v2ex.com/avatar/8ddd/6828/240733_normal.png?m=1519953523)||8<br><br>**[abccccabc](/member/abccccabc)** Â <br><br>Â  Â 9 å¤©å‰<br><br>å€Ÿè¿™ä¸ªä¸»é¢˜é—®ä¸€ä¸‹ï¼štampermonkey å¦‚ä½•æ‹¦æˆªé¡µé¢çš„ audio/video è¿™äº›è¯·æ±‚å‘¢ï¼Ÿä¸€ç›´æ²¡æœ‰æ‰¾åˆ°è¿™ç§æ’ä»¶ã€‚  <br>  <br>ä¸çŸ¥é‚£ä½é«˜æ‰‹ show ä¸€ä¸‹ä»£ç ã€‚|

|   |   |   |
|---|---|---|
|![loginv2](https://cdn.v2ex.com/avatar/e492/a12a/38849_normal.png?m=1678049930)||9<br><br>**[loginv2](/member/loginv2)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[abccccabc](/member/abccccabc) [https://segmentfault.com/a/1190000025182822](https://segmentfault.com/a/1190000025182822)|

|   |   |   |
|---|---|---|
|![fuzzsh](https://cdn.v2ex.com/gravatar/80a77afb1761c378e3255001241a6f8b?s=48&d=retro)||10<br><br>**[fuzzsh](/member/fuzzsh)** Â <br><br>Â  Â 9 å¤©å‰ via Android<br><br>fiddler å¯ä»¥æ‹¦æˆªæ”¹è¿”å›å†…å®¹|

|   |   |   |
|---|---|---|
|![CureDovahkiin](https://cdn.v2ex.com/gravatar/2ea98c6fd91d8a655144e37613586017?s=48&d=retro)||11<br><br>**[CureDovahkiin](/member/CureDovahkiin)** Â <br><br>OP<br><br>Â  Â 9 å¤©å‰ Â  ![â¤ï¸](/static/img/heart_neue_red.png?v=16ec2dd0a880be6edda1e4a2e35754b3) 1<br><br>@[klesh](/member/klesh) ç›´æ¥é—® deepseek å°±è¡Œäº†  <br>[https://gist.github.com/shadowdreamer/4687f0fe1da96bec64db68feccbb09d1](https://gist.github.com/shadowdreamer/4687f0fe1da96bec64db68feccbb09d1)  <br>çœ‹äº†ä¸‹åº”è¯¥æ²¡æ¯›ç—…ï¼ˆ  <br>å› ä¸ºå¤§éƒ¨åˆ†é€»è¾‘éƒ½é€šç”¨ï¼Œæ‰€ä»¥æ‰æƒ³ä¼šä¸ä¼šæœ‰æ‰©å±•åŒ…è£…ä¸€ä¸‹ï¼Œæœ‰ä¸ªä¿®æ”¹è¯·æ±‚å¤´çš„æ‰©å±•å« Header Editor ï¼Œé‚£ä¿®æ”¹å‚æ•°å’Œå“åº”ä½“ä¹Ÿæ„Ÿè§‰ä¹Ÿå¯ä»¥æœ‰|

|   |   |   |
|---|---|---|
|![NoOneNoBody](https://cdn.v2ex.com/gravatar/ade866d803c393db42301082488695d2?s=48&d=retro)||12<br><br>**[NoOneNoBody](/member/NoOneNoBody)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[abccccabc](/member/abccccabc) #8  <br>umatrix ä¹‹ç±»å¯ä»¥æ‹¦æˆª media ç±»å‹ï¼Œä¸è¿‡å¯èƒ½æŠŠ font ä¹‹ç±»ä¹Ÿæ‹¦æˆªäº†  <br>æˆ–è€…æœ request block (å…³é”®è¯ï¼Œä¸æ˜¯åå­—)ä¹‹ç±»çš„æ‰©å±•  <br>  <br>æ²¹çŒ´è„šæœ¬æ‹¦æˆªéœ€è¦è®¾ç½®æ›´æ—©çš„åŠ è½½æ—¶é—´ï¼Œå› ä¸ºé»˜è®¤æ˜¯é¡µé¢åŠ è½½å®Œæˆï¼Œè¿™æ ·å¤§éƒ¨åˆ†å·²ç»åŠ è½½äº†ï¼Œæ‹¦æˆªæ²¡æ„ä¹‰  <br>å…·ä½“è®© AI å†™ä¸€ä¸ªå°±è¡Œï¼Œç»°ç»°æœ‰ä½™|

|   |   |   |
|---|---|---|
|![abccccabc](https://cdn.v2ex.com/avatar/8ddd/6828/240733_normal.png?m=1519953523)||13<br><br>**[abccccabc](/member/abccccabc)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[NoOneNoBody](/member/NoOneNoBody) @[loginv2](/member/loginv2) å¤šè°¢ä¸¤ä½åˆ†äº«ã€‚æ‰¾åˆ° http request block å’Œ custome block æŒ¨ä¸ªè¯•ç”¨ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœã€‚|

|   |   |   |
|---|---|---|
|![leokun](https://cdn.v2ex.com/avatar/12ab/702a/625066_normal.png?m=1712507728)||14<br><br>**[leokun](/member/leokun)** Â <br><br>Â  Â 9 å¤©å‰<br><br>Hoppscotch çš„æ’ä»¶å®ç°äº†ç±»ä¼¼åŠŸèƒ½ï¼Œä¸è¿‡å¹¶ä¸æ˜¯ä¼ ç»Ÿçš„æ‹¦æˆª xhr å’Œ fetch|

|   |   |   |
|---|---|---|
|![kk2syc](https://cdn.v2ex.com/avatar/7eac/ff4c/655410_normal.png?m=1734018023)||15<br><br>**[kk2syc](/member/kk2syc)** Â <br><br>Â  Â 9 å¤©å‰ Â  ![â¤ï¸](/static/img/heart_neue_red.png?v=16ec2dd0a880be6edda1e4a2e35754b3) 1<br><br>@[CureDovahkiin](/member/CureDovahkiin) @[klesh](/member/klesh) æ³¨å…¥ç‚¹é€‰å¥½éƒ½å¯ä»¥é‡å†™å•Šï¼Œfetch å‚è€ƒä¸‹ï¼Œxhr ç±»ä¼¼  <br>  <br>(function () {  <br>Â  Â const originFetch = fetch;  <br>Â  Â // console.log(originFetch)  <br>Â  Â window.unsafeWindow.fetch = (url, options) => {  <br>Â  Â  Â  Â return originFetch(url, options).then(async (response) => {  <br>Â  Â  Â  Â  Â  Â console.log(url)  <br>Â  Â  Â  Â  Â  Â if(url === 'https://domain/something'){  <br>Â  Â  Â  Â  Â  Â  Â  Â const responseClone = response.clone()  <br>Â  Â  Â  Â  Â  Â  Â  Â let res = await responseClone.json()  <br>Â  Â  Â  Â  Â  Â  Â  Â res.data.push('å¤„ç†æ•°æ®')  <br>Â  Â  Â  Â  Â  Â  Â  Â const responseNew = new Response(JSON.stringify(res), response);  <br>Â  Â  Â  Â  Â  Â  Â  Â return responseNew  <br>Â  Â  Â  Â  Â  }else{  <br>Â  Â  Â  Â  Â  Â  Â  Â return response  <br>Â  Â  Â  Â  Â  }  <br>Â  Â  Â  })  <br>Â  }  <br>})()|

|   |   |   |
|---|---|---|
|![kk2syc](https://cdn.v2ex.com/avatar/7eac/ff4c/655410_normal.png?m=1734018023)||16<br><br>**[kk2syc](/member/kk2syc)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[foufoufm](/member/foufoufm) å¤§éƒ¨åˆ†æ˜¯è‡ªå·±æ—¥ç§¯æœˆç´¯å†™ä¸‹æ¥çš„é’ˆå¯¹æ€§è„šæœ¬ï¼Œä¹Ÿæœ‰ä¸€äº›åˆ†äº«çš„ï¼Œæ¯”å¦‚ç™¾åº¦ç›˜ vip è§£æå•Šï¼ˆè™½ç„¶ä»å…è´¹å˜æˆèµåŠ©å¯ç”¨ï¼Œå‡ å—é’±ä¹Ÿæ¯” svip ä¾¿å®œï¼‰|

|   |   |   |
|---|---|---|
|![foufoufm](https://cdn.v2ex.com/avatar/0484/763b/499086_normal.png?m=1733884433)||17<br><br>**[foufoufm](/member/foufoufm)** Â <br><br>Â  Â 9 å¤©å‰<br><br>@[kk2syc](/member/kk2syc) æœ‰æ²¡æœ‰ä¼ é€é—¨æŒ‡æŒ‡åŒ— æ±‚æ±‚|

|   |   |   |
|---|---|---|
|![lijiangang886](https://cdn.v2ex.com/gravatar/52ef5f4954cf1b0778a5694c7a8e4669?s=48&d=retro)||18<br><br>**[lijiangang886](/member/lijiangang886)** Â <br><br>Â  Â 9 å¤©å‰<br><br>æµè§ˆå™¨ä¸ºæ‰©å±•æä¾›äº† API å¯ä»¥æ‹¦æˆªè¯·æ±‚ï¼š [webRequest] ï¼ˆå·²åœ¨ manifest V3 ä¸­è¢« Chrome åºŸæ­¢ï¼‰å’Œ [declarativeNetRequest]|

|   |   |   |
|---|---|---|
|![EdwardWong](https://cdn.v2ex.com/gravatar/ad8ab334baecba498eb1214c1e198dec?s=48&d=retro)||19<br><br>**[EdwardWong](/member/EdwardWong)** Â <br><br>Â  Â 8 å¤©å‰<br><br>å¦‚æœæ˜¯ Bilibili å¯ä»¥ç”¨ [https://github.com/the1812/Bilibili-Evolved](https://github.com/the1812/Bilibili-Evolved) ï¼Œä¹Ÿæ˜¯ç”¨ user.js å®ç°çš„ï¼Œé‡Œé¢æœ‰ç»„ä»¶å¯ä»¥è¿‡æ»¤é¦–é¡µçš„æµã€‚|
