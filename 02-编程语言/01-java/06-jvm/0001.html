<!DOCTYPE html> <html><head>
		<title>0001</title>
		<base href="..\..\../">
		<meta id="root-path" root-path="..\..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="cs-learning-vault - 0001">
		<meta property="og:title" content="0001">
		<meta property="og:description" content="cs-learning-vault - 0001">
		<meta property="og:type" content="website">
		<meta property="og:url" content="02-编程语言/01-java/06-jvm/0001.html">
		<meta property="og:image" content="02-编程语言\01-java\06-jvm\assets\1722924406-738ffdb470d9c0e5edb8e2c7e20a60be.webp">
		<meta property="og:site_name" content="cs-learning-vault">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-texatom{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-mpadded{display:inline-block;text-align:left}mjx-rbox{display:inline-block;position:relative}mjx-mover{display:inline-block;text-align:left}mjx-mover:not([limits=false]){padding-top:.1em}mjx-mover:not([limits=false])>*{display:block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-mtable{display:inline-block;text-align:center;vertical-align:.25em;position:relative;box-sizing:border-box;border-spacing:0px;border-collapse:collapse}mjx-mstyle[size="s"] mjx-mtable{vertical-align:.354em}mjx-labels{position:absolute;left:0;top:0}mjx-table{display:inline-block;vertical-align:-.5ex;box-sizing:border-box}mjx-table>mjx-itable{vertical-align:middle;text-align:left;box-sizing:border-box}mjx-labels>mjx-itable{position:absolute;top:0}mjx-mtable[justify=left]{text-align:left}mjx-mtable[justify=right]{text-align:right}mjx-mtable[justify=left][side=left]{padding-right:0!important}mjx-mtable[justify=left][side=right]{padding-left:0!important}mjx-mtable[justify=right][side=left]{padding-right:0!important}mjx-mtable[justify=right][side=right]{padding-left:0!important}mjx-mtable[align]{vertical-align:baseline}mjx-mtable[align=top]>mjx-table{vertical-align:top}mjx-mtable[align=bottom]>mjx-table{vertical-align:bottom}mjx-mtable[side=right] mjx-labels{min-width:100%}mjx-mtr{display:table-row;text-align:left}mjx-mtr[rowalign=top]>mjx-mtd{vertical-align:top}mjx-mtr[rowalign=center]>mjx-mtd{vertical-align:middle}mjx-mtr[rowalign=bottom]>mjx-mtd{vertical-align:bottom}mjx-mtr[rowalign=baseline]>mjx-mtd{vertical-align:baseline}mjx-mtr[rowalign=axis]>mjx-mtd{vertical-align:.25em}mjx-mtd{display:table-cell;text-align:center;padding:.215em .4em}mjx-mtd:first-child{padding-left:0}mjx-mtd:last-child{padding-right:0}mjx-mtable>*>mjx-itable>:first-child>mjx-mtd{padding-top:0}mjx-mtable>*>mjx-itable>:last-child>mjx-mtd{padding-bottom:0}mjx-tstrut{display:inline-block;height:1em;vertical-align:-.25em}mjx-labels[align=left]>mjx-mtr>mjx-mtd{text-align:left}mjx-labels[align=right]>mjx-mtr>mjx-mtd{text-align:right}mjx-mtd[extra]{padding:0}mjx-mtd[rowalign=top]{vertical-align:top}mjx-mtd[rowalign=center]{vertical-align:middle}mjx-mtd[rowalign=bottom]{vertical-align:bottom}mjx-mtd[rowalign=baseline]{vertical-align:baseline}mjx-mtd[rowalign=axis]{vertical-align:.25em}mjx-msubsup{display:inline-block;text-align:left}mjx-script{display:inline-block;padding-right:.05em;padding-left:.033em}mjx-script>mjx-spacer{display:block}mjx-stretchy-h.mjx-c2192 mjx-ext mjx-c::before{content:"−";padding:.583em 0 .082em}mjx-stretchy-h.mjx-c2192 mjx-end mjx-c::before{content:"→";padding:.583em 0 .082em}mjx-stretchy-v.mjx-c28 mjx-beg mjx-c::before{content:"⎛";padding:1.154em .875em .655em 0}mjx-stretchy-v.mjx-c28 mjx-ext mjx-c::before{content:"⎜";width:.875em}mjx-stretchy-v.mjx-c28 mjx-end mjx-c::before{content:"⎝";padding:1.165em .875em .644em 0}mjx-stretchy-v.mjx-c28>mjx-end{margin-top:-1.809em}mjx-stretchy-v.mjx-c28>mjx-ext{border-top-width:1.779em;border-bottom-width:1.779em}mjx-stretchy-v.mjx-c29 mjx-beg mjx-c::before{content:"⎞";padding:1.154em .875em .655em 0}mjx-stretchy-v.mjx-c29 mjx-ext mjx-c::before{content:"⎟";width:.875em}mjx-stretchy-v.mjx-c29 mjx-end mjx-c::before{content:"⎠";padding:1.165em .875em .644em 0}mjx-stretchy-v.mjx-c29>mjx-end{margin-top:-1.809em}mjx-stretchy-v.mjx-c29>mjx-ext{border-top-width:1.779em;border-bottom-width:1.779em}mjx-c.mjx-c48::before{padding:.683em .75em 0 0;content:"H"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c49::before{padding:.683em .361em 0 0;content:"I"}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c22EF::before{padding:.31em 1.172em 0 0;content:"⋯"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c22EE::before{padding:1.3em .278em .03em 0;content:"⋮"}mjx-c.mjx-c22F1::before{padding:1.52em 1.282em 0 0;content:"⋱"}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-msub{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-mrow{display:inline-block;text-align:left}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c28.TEX-S3::before{padding:1.45em .736em .949em 0;content:"("}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c6C::before{padding:.694em .278em 0 0;content:"l"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c67::before{padding:.453em .5em .206em 0;content:"g"}mjx-c.mjx-c2061::before{padding:0;content:""}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c29.TEX-S3::before{padding:1.45em .736em .949em 0;content:")"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="Java Virtual Machine (JVM) Performance Tuning Tutorial - Sematext"><p dir="auto">Java Virtual Machine (JVM) Performance Tuning Tutorial - Sematext</p></h1><div class="el-p"><p dir="auto">来源网址: <a rel="noopener nofollow" class="external-link" href="https://sematext.com/blog/jvm-performance-tuning/" target="_blank">https://sematext.com/blog/jvm-performance-tuning/</a></p></div><div class="el-p"><p dir="auto">裁剪时间: 2024-08-06 14:06:46</p></div><div class="el-h1 heading-wrapper"><div class="heading-children"><div class="el-p"><p dir="auto">When it comes to Java applications, to make sure they run at peak performance, it’s critical to close the resource gap between the code and the virtual machine it’s running on – if there is one. The way to do that is by <strong>peaking into and fine-tuning the</strong> <strong>Java Virtual Machine (JVM)</strong>.<br>
当涉及到 Java 应用程序时，为了确保它们以最高性能运行，关键是要缩小代码和运行它的虚拟机之间的资源差距——如果有的话。实现这一点的方法是深入研究并微调 Java 虚拟机(JVM)。</p></div><div class="el-p"><p dir="auto">However, that’s easier said than done. Many factors can influence <a data-tooltip-position="top" aria-label="https://sematext.com/guides/java-monitoring/" rel="noopener nofollow" class="external-link" href="https://sematext.com/guides/java-monitoring/" target="_blank">JVM performance</a>, and during tuning, you must consider all of them. Though, there are ways around that to make it not be such a pain.</p></div><div class="el-p"><p dir="auto">In this post, we are going to help you plan and understand&nbsp;<strong>how to do JVM tuning</strong> by using the JVM parameters and following some performance tuning principles and procedures. Let’s get to it!</p></div><div class="el-p"><p dir="auto"><span alt="JVM performance tuning step by step" src="assets/1722924406-738ffdb470d9c0e5edb8e2c7e20a60be.webp" class="internal-embed media-embed image-embed is-loaded"><img alt="JVM performance tuning step by step" src="02-编程语言/01-java/06-jvm/assets/1722924406-738ffdb470d9c0e5edb8e2c7e20a60be.webp"></span></p></div><div class="el-h2 heading-wrapper"><h2 data-heading="**What Is JVM Tuning**" dir="auto" class="heading" id="**What_Is_JVM_Tuning**"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>What Is JVM Tuning</strong></h2><div class="heading-children"><div class="el-p"><p dir="auto">  Before diving into JVM tuning, there are a few things you should consider first:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>&nbsp; <strong>Cost</strong> – considering your environments, you may gain more by adding hardware instead of spending time to tune the JVM.</p>
<ul>
<li data-line="1" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<ul>
<li data-line="1" dir="auto">成本 * *-考虑到您的环境，您可以通过添加硬件而不是花时间调优 JVM 来获得更多</li>
</ul>
</li>
</ul>
</li>
<li data-line="3" dir="auto">
<p>&nbsp; <strong>Desired outcome</strong>&nbsp;– in the long run, it’s more efficient to tune for stability, rather than performance, but they do overlap.<br>
期望的结果——从长远来看，调优稳定性要比调优性能更有效，但它们确实存在重叠</p>
</li>
<li data-line="6" dir="auto">
<p>&nbsp; <strong>Ongoing issues</strong> – before starting tuning, you should do a thorough check of your system to see if there isn’t an underlying issue somewhere as tuning can delay or hide it temporarily. You can’t do JVM tuning, nor debugging if you’re not monitoring the JVM. Check out what are the critical JVM metrics &nbsp;to monitor and which are the best <a data-tooltip-position="top" aria-label="https://sematext.com/guides/java-monitoring/" rel="noopener nofollow" class="external-link" href="https://sematext.com/guides/java-monitoring/" target="_blank">Java monitoring tools</a>&nbsp;available today.<br>
正在发生的问题——在开始调优之前，您应该彻底检查一下您的系统，看看是否有一个潜在的问题，因为调优可能会延迟或暂时隐藏它。如果不监视 JVM，就不能进行 JVM 调优或调试。看看哪些是需要监视的关键 JVM 指标，哪些是目前可用的最好的</p>
</li>
<li data-line="9" dir="auto">
<p>&nbsp; <strong>Memory leaks</strong>&nbsp;– they always lead to garbage collection (GC) issues regardless of tuning.<br>
内存泄漏——无论调优与否，它们总是会导致垃圾收集(GC)问题。</p>
</li>
</ul></div><div class="el-p"><p dir="auto">Java virtual machine tuning is&nbsp;the process of adjusting the default parameters to match our application needs. This includes simple adjustments like the size of the <a data-tooltip-position="top" aria-label="https://sematext.com/glossary/jvm-heap/" rel="noopener nofollow" class="external-link" href="https://sematext.com/glossary/jvm-heap/" target="_blank">heap</a> , through choosing the right garbage collector to using optimized versions of getters.<br>
Java 虚拟机调优是调整默认参数以满足应用程序需求的过程。这包括一些简单的调整，比如通过选择正确的垃圾收集器来使用优化版本的 getter，来调整堆的大小( <a data-tooltip-position="top" aria-label="https://sematext.com/glossary/jvm-heap/)。" rel="noopener nofollow" class="external-link" href="https://sematext.com/glossary/jvm-heap/)%E3%80%82" target="_blank">https://sematext.com/glossary/jvm-heap/)。</a></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="**App Optimization Considers All Performance Layers**" dir="auto" class="heading" id="**App_Optimization_Considers_All_Performance_Layers**"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>App Optimization Considers All Performance Layers</strong></h2><div class="heading-children"><div class="el-p"><p dir="auto">  Although critical, tuning JVM is not enough to ensure optimal performance. For instance, if an app has a badly designed architecture or poorly written code, you can’t expect performance to skyrocket by merely tuning the JVM.</p></div><div class="el-p"><p dir="auto">Not to mention, once you have the first two optimized, you’d need to get back to the JVM and start it all over again. A well-done tuning looks at the whole system and all the layers that can impact performance, including database and OS.<br>
更不用说，一旦对前两个进行了优化，就需要返回到 JVM 并从头开始。良好的调优将着眼于整个系统和所有可能影响性能的层，包括数据库和操作系统。</p></div><div class="el-p"><p dir="auto">That said, when you're at the stage of performing JVM tuning, assume that the architecture and code of your project are either optimal or have been tuned. However, before diving into it, you must set performance optimization goals and identify the current performance issues. The goals will serve as a benchmark to compare the app with once it’s optimized and to determine if it needs further intervention.<br>
也就是说，当您处于执行 JVM 调优的阶段时，假设项目的体系结构和代码要么是最优的，要么已经进行了调优。但是，在深入研究之前，必须设置性能优化目标并确定当前的性能问题。这些目标将作为一个基准，以比较应用程序一旦优化，并确定是否需要进一步的干预。</p></div><div class="el-p"><p dir="auto">Looking to learn more about JVM monitoring with Sematext Cloud? Check out this short video below:<br>
<a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=ijkRkMLh_qQ&amp;embeds_referring_euri=https%3A%2F%2Fsematext.com%2F&amp;embeds_referring_origin=https%3A%2F%2Fsematext.com" rel="noopener nofollow" class="external-link" href="https://www.youtube.com/watch?v=ijkRkMLh_qQ&amp;embeds_referring_euri=https%3A%2F%2Fsematext.com%2F&amp;embeds_referring_origin=https%3A%2F%2Fsematext.com" target="_blank">前往平台观看</a></p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="**What You Need to Know Before Planning JVM Performance Tuning**" dir="auto" class="heading" id="**What_You_Need_to_Know_Before_Planning_JVM_Performance_Tuning**"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>What You Need to Know Before Planning JVM Performance Tuning</strong></h2><div class="heading-children"><div class="el-p"><p dir="auto">Before diving into the step-by-step process, you need to get familiar with some basic concepts that we’ll use further on:</p></div><div class="el-h3 heading-wrapper"><h3 data-heading="JVM Main Parameters" dir="auto" class="heading" id="JVM_Main_Parameters"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>JVM Main Parameters</h3><div class="heading-children"><div class="el-p"><p dir="auto">JVM parameters or JVM arguments are Java-specific values that change the behavior of the Java Virtual Machine.</p></div><div class="el-p"><p dir="auto">When it comes to JVM tuning, there are few important parameters you should know as you’ll encounter them when configuring, tuning, and improving overall performance of the JVM. </p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Heap Memory" dir="auto" class="heading" id="Heap_Memory"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Heap Memory</h3><div class="heading-children"><div class="el-p"><p dir="auto">Whatever you do, when it comes to JVM performance, you will, more than likely, reach a point where you have to initialize the heap memory. <strong>The parameters to specify minimum and maximum heap size are:</strong></p></div><div class="el-pre"><pre class="language-bash" tabindex="0"><code data-line="0" class="language-bash is-loaded"><span class="token function">java</span> <span class="token parameter variable">-Xms4096m</span> <span class="token parameter variable">-Xmx4096m</span> app.jar
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">When setting the minimum and maximum heap size of the JVM memory you may want to consider setting them to the same values. That way your heap will not have to be resized saving precious CPU cycles. You may also want to pre-touch all the pages if you are using larger heap by setting the -XX:+AlwaysPreTouch&nbsp;flag to the startup options.<br>
在设置 JVM 内存的最小和最大堆大小时，可能需要考虑将它们设置为相同的值。这样，您的堆就不必调整大小，从而节省宝贵的 CPU 周期。如果要使用更大的堆，可以通过将-XX: + AlwaysPreTouch 标志设置为启动选项来预先触摸所有页面。</p></div><div class="el-p"><p dir="auto"><strong>Starting from Java 8 the Metaspace has replaced the old PermGen memory space.</strong> No more java.lang.OutOfMemoryError: PermGen&nbsp;errors, right now we can start <a data-tooltip-position="top" aria-label="https://sematext.com/guides/application-performance-monitoring/" rel="noopener nofollow" class="external-link" href="https://sematext.com/guides/application-performance-monitoring/" target="_blank">monitoring our application</a> logs for java.lang.OutOfMemoryError: Metadata space. By default the class metadata allocation is limited by the amount of available native memory and we have a new option to limit the maximum size of the new memory space introduced with Java 8. But just because the space can grow up to the limits of the native memory it doesn’t mean it is always occupying as much as it can. This region of the JVM memory can be dynamically resized depending on the needs.<br>
从 Java 8开始，Metaspace 取代了原来的 PermGen 内存空间。没有java.lang.OutOfMemoryError: PermGen&nbsp;errors，现在我们可以开始<a data-tooltip-position="top" aria-label="https://sematext.com/guides/application-performance-monitoring/" rel="noopener nofollow" class="external-link" href="https://sematext.com/guides/application-performance-monitoring/" target="_blank">监视我们的应用程序</a> java.lang 的日志。元数据空间。默认情况下，类元数据分配受到可用本机内存数量的限制，我们有一个新选项来限制 Java8引入的新内存空间的最大大小。但是，仅仅因为空间可以发展到本机内存的限制，并不意味着它总是占用尽可能多的空间。JVM 内存的这个区域可以根据需要动态调整大小。</p></div><div class="el-p"><p dir="auto"><strong>The following properties exposed by the JVM allow us to control the Metaspace</strong>:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; -XX:MaxMetaspaceSize&nbsp;– unlimited by default, sets the maximum amount of native memory that can be allocated for the class metadata.</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; -XX:MetaspaceSize&nbsp;– sets the size of the allocated class metadata above which the first garbage collection will be triggered. Default value is platform dependent.</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; -XX:MinMetaspaceFreeRatio&nbsp;– minimum percentage of the Metaspace memory region that needs to be available after garbage collection. If the amount of memory left is below the threshold the Metaspace region will be resized.</p>
</li>
<li data-line="6" dir="auto">
<p>&nbsp; -XX:MaxMetaspaceFreeRatio&nbsp;– maximum percentage of the Metaspace memory region that needs to be available after the garbage collection. If the amount of memory left is above the threshold the Metaspace region will be resized.</p>
</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Keep in mind that monitoring Metaspace region of the memory may be a very good idea as high garbage collection work in this memory region may indicate memory leaks in classes or classloaders.</strong><br>
请记住，监视内存的 Metaspace 区域可能是一个非常好的主意，因为该内存区域中的高垃圾收集工作可能表明类或类加载器中存在内存泄漏</p></div><div class="el-p"><p dir="auto">Delving deeper, it’s important to <strong>take note of memory allocation parameters as well as you’ll need them during tuning</strong>. They are as follows: </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; -XX:NewSize&nbsp;sets the initial size of young generation space</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; -XXMaxNewSize&nbsp;states the maximum size of young generation space</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; -Xmn specifies the size of the entire young generation space, meaning eden and the two survivor spaces</p>
</li>
</ul></div><div class="el-p"><p dir="auto">You will <strong>use these parameters to calculate aspects regarding the old generation space size</strong>:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; The size of the old generation is automatically set based on the size of the young generation space</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; The initial old generation space equals the -Xmx&nbsp;value minus the -XX:NewSize&nbsp;value</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; The minimum size of the old generation space equals &nbsp;the -Xmx value minus the -XX:MaxNewSize&nbsp;value</p>
</li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Out of Memory Error" dir="auto" class="heading" id="Out_of_Memory_Error"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Out of Memory Error</h3><div class="heading-children"><div class="el-p"><p dir="auto"><strong><a data-tooltip-position="top" aria-label="https://sematext.com/blog/java-lang-outofmemoryerror/" rel="noopener nofollow" class="external-link" href="https://sematext.com/blog/java-lang-outofmemoryerror/" target="_blank">Java OutOfMemoryError</a> is probably every <a data-tooltip-position="top" aria-label="https://sematext.com/glossary/devops/" rel="noopener nofollow" class="external-link" href="https://sematext.com/glossary/devops/" target="_blank">DevOps</a>’ worst nightmare</strong>. You find yourself facing an app crash that is difficult to replicate and diagnose. Unfortunately, it’s quite frequent with large applications. Fortunately, <strong>JVM has parameters that write heap memory on a file that you can later use to troubleshoot</strong>.</p></div><div class="el-pre"><pre class="language-plain" tabindex="0"><code data-line="0" class="language-plain is-loaded">-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=./java_pid&lt;pid&gt;.hprof
-XX:OnOutOfMemoryError="&lt;cmd args&gt;;&lt;cmd args&gt;"
-XX:+UseGCOverheadLimit
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; <em>HeapDumpOnOutOfMemoryError</em> commands the JVM to dump heap to a physical file when java.lang.OutOfMemoryError is thrown</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; <em>HeapDumpPath</em>&nbsp;specifies the path to directory or filename</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; <em>OnOutOfMemoryError</em> is used to run emergency user-defined commands when an OutOfMemoryError&nbsp;first occurs</p>
</li>
<li data-line="6" dir="auto">
<p>&nbsp; <em>UseGCOverheadLimit</em>&nbsp;is a policy that limits the proportion of the VM’s time that is spent in GC before an OutOfMemoryError is thrown</p>
</li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Garbage Collection" dir="auto" class="heading" id="Garbage_Collection"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Garbage Collection</h3><div class="heading-children"><div class="el-p"><p dir="auto">JVM has four <strong>garbage collector implementations</strong>: </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; Serial Garbage Collector -XX:+UseSerialGC</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; Parallel Garbage Collector -XX:+UseParallelGC</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; CMS Garbage Collector -XX:+UseConcMarkSweepGC</p>
</li>
<li data-line="6" dir="auto">
<p>&nbsp; G1 Garbage Collector -XX:+UseG1GC</p>
</li>
</ul></div><div class="el-p"><p dir="auto">The first two garbage collectors are dedicated to work in the area of young generation heap space, while the CMS and G1 garbage collectors are dedicated for the old generation space. </p></div><div class="el-p"><p dir="auto">Read more about this in our article about how <a data-tooltip-position="top" aria-label="https://sematext.com/blog/java-garbage-collection/" rel="noopener nofollow" class="external-link" href="https://sematext.com/blog/java-garbage-collection/" target="_blank">Java garbage collection</a> works.  </p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="GC Logging" dir="auto" class="heading" id="GC_Logging"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>GC Logging</h3><div class="heading-children"><div class="el-p"><p dir="auto">Garbage Collection performance is closely related to JVM and app performance. When the garbage collector is not able to clear the memory it works more and more eventually leading to stop the world events or even out of memory situations. We want to avoid such situations as much as possible. To be able to do that we need to be able to observe what JVM garbage collector is doing. <strong>One of the best ways to monitor GC performance is to look at <a data-tooltip-position="top" aria-label="https://sematext.com/blog/java-garbage-collection-logs/" rel="noopener nofollow" class="external-link" href="https://sematext.com/blog/java-garbage-collection-logs/" target="_blank">GC logs</a>.</strong> You can log GC activity with the following commands:</p></div><div class="el-pre"><pre class="language-plain" tabindex="0"><code data-line="0" class="language-plain is-loaded">-XX:+UseGCLogFileRotation
-XX:NumberOfGCLogFiles=&lt;number of log files&gt;
-XX:GCLogFileSize=&lt;file size&gt;[unit]
-Xloggc:/path/to/gc.log
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; -XX:+UseGCLogFileRotation&nbsp;specifies the log file rotation policy</li>
<li data-line="1" dir="auto">&nbsp; -XX:NumberOfGCLogFiles&nbsp;states the maximum number of log files to use when rotating logs</li>
<li data-line="2" dir="auto">&nbsp; -XX:GCLogFileSize&nbsp;refers to the maximum size of the <a data-tooltip-position="top" aria-label="https://sematext.com/glossary/log-file/" rel="noopener nofollow" class="external-link" href="https://sematext.com/glossary/log-file/" target="_blank">log file</a></li>
<li data-line="3" dir="auto">&nbsp; -Xloggc&nbsp;specifies where the file is located</li>
</ul></div><div class="el-p"><p dir="auto">There are also additional &nbsp;JVM parameters important for <a data-tooltip-position="top" aria-label="https://sematext.com/blog/java-garbage-collection-logs/" rel="noopener nofollow" class="external-link" href="https://sematext.com/blog/java-garbage-collection-logs/" target="_blank">GC logging</a>. For example:  </p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; -XX:+PrintGCDetails – includes additional details in the garbage collector log</li>
<li data-line="1" dir="auto">&nbsp; -XX:+PrintGCDateStamps – prints date stamps to the log</li>
<li data-line="2" dir="auto">&nbsp; -XX:+PrintGCTimeStamps&nbsp;– prints the timestamps to the log</li>
<li data-line="3" dir="auto">&nbsp; -XX:+PrintTenuringDistribution&nbsp;– adds information about tenuring age information to the log</li>
<li data-line="4" dir="auto">&nbsp; -XX:+PrintGCApplicationStoppedTime&nbsp;– includes information about how much time the application was stopped at safepoint which are commonly caused by stop the world garbage collection</li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Other" dir="auto" class="heading" id="Other"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Other</h3><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; -XX:+UseStringDeduplication&nbsp;eliminates duplicate string value to a single instance to reduce unnecessary memory usage.</li>
<li data-line="1" dir="auto">&nbsp; -XX:+UseLWPSynchronization&nbsp;enables LWP (Light Weight Process) – based instead of thread-based synchronization.</li>
<li data-line="2" dir="auto">&nbsp; -XX:LargePageSizeInBytes&nbsp;sets the large page size used for the Java heap. Have in mind, though, that while larger page sizes allow for more efficient use of memory hardware, this may lead to larger space sizes for Metaspace, which can force you to reduce the size of the Java heap space.</li>
<li data-line="3" dir="auto">&nbsp; -XX:MaxHeapFreeRatio&nbsp;enables the maximum percentage of heap free after GC to avoid shrinking.</li>
<li data-line="4" dir="auto">&nbsp; -XX:MinHeapFreeRatio&nbsp;enables the minimum percentage of heap free after GC to avoid expansion.</li>
<li data-line="5" dir="auto">&nbsp; -XX:SurvivorRatio&nbsp;sets the ratio of eden/survivor space size.</li>
<li data-line="6" dir="auto">&nbsp; -XX:+UseLargePages&nbsp;use large page memory.</li>
<li data-line="7" dir="auto">&nbsp; -XX:+UseStringCache&nbsp;enables caching of commonly allocated strings.</li>
<li data-line="8" dir="auto">&nbsp; -XX:+UseCompressedStrings&nbsp;use a byte[] type for String objects, which can be represented in pure ASCII format.</li>
<li data-line="9" dir="auto">&nbsp; -XX:+OptimizeStringConcat&nbsp;optimizes String concatenation operations where possible.</li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Set your JVM Performance Goals" dir="auto" class="heading" id="Set_your_JVM_Performance_Goals"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Set your JVM Performance Goals</h3><div class="heading-children"><div class="el-p"><p dir="auto">Before you start tuning the JVM for performance, you first have to set performance goals. You will set values for these goals later on:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; <strong>Latency</strong> is the amount of time required to run a garbage collection event.</li>
<li data-line="1" dir="auto">&nbsp; <strong>Throughput</strong>&nbsp;is the percentage of time the VM spends executing the application versus time spent performing garbage collection.</li>
<li data-line="2" dir="auto">&nbsp; <strong>Footprint</strong>&nbsp;is the amount of memory required by the garbage collector to run smoothly.</li>
</ul></div><div class="el-p"><p dir="auto">However, <strong>you can’t focus on all three goals at once, as any performance gain from any of them results in a performance loss of the other one or two</strong>. For example:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; High throughput and low latency results in higher memory usage.</li>
<li data-line="1" dir="auto">&nbsp; High throughput and low memory usage results in higher latency.</li>
<li data-line="2" dir="auto">&nbsp; Low latency and low memory usage results in lower throughput.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>You have to decide which two are the most relevant to your app while you consider your business needs.</strong> Either way, the goal of JVM tuning is to optimize the garbage collector so that you have high throughput with less memory consumption and low latency. However, less memory/low latency does not automatically mean that the less or lower the memory or latency is, the better the performance. That depends on which metrics you choose to keep an eye on.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="JVM Tuning Principles" dir="auto" class="heading" id="JVM_Tuning_Principles"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>JVM Tuning Principles</h3><div class="heading-children"><div class="el-p"><p dir="auto">When performing performance tuning, have in mind the following principles as they make garbage collection easier.</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">&nbsp; <strong>Minor GC collection</strong>&nbsp;– implies that Minor GC should collect as many dead objects as possible to reduce the frequency of Full GC.</li>
<li data-line="1" dir="auto">&nbsp; <strong>GC memory maximization</strong>&nbsp;– it says that the more memory the GC can access during a cycle, the more efficient the cleanup and the lower the collection frequency.</li>
<li data-line="2" dir="auto">&nbsp; <strong>Two out of three</strong>&nbsp;– as stated above, you need to pick two out of the three performance goals.</li>
</ul></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="JVM Tuning Procedure" dir="auto" class="heading" id="JVM_Tuning_Procedure"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>JVM Tuning Procedure</h3><div class="heading-children"><div class="el-p"><p dir="auto">1.Observation<br>
2.Determine Memory Footprint<br>
3.Tuning for Latency<br>
4.Tuning for Throughput</p></div><div class="el-p"><p dir="auto">First, <strong>what you need to have in mind is that Java VM tuning can’t solve all performance issues.</strong> Therefore, it should be done only necessary. That said, tuning is a lengthy process where you’ll more than likely perform ongoing configuration optimizations and multiple iterations based on the stress and benchmark tests results. Before meeting the desired metric, you may also need to tune parameters many times, thus running the tests all over again.  </p></div><div class="el-p"><p dir="auto"><strong>As a general rule, tuning should first meet the memory usage requirements, latency, and finally, throughput, as you’ll see in the following sections.</strong></p></div><div class="el-p"><p dir="auto">We are going to use the default parallel garbage collector (or throughput collector) in JDK, which you can enable with -XX:+UseParallelGC. This flag enables a parallel version of both the young- and old-generation collectors. You can check the defaults for your Java version by running java -XX:+PrintCommandLineFlags -version. You can also check the serial garbage collector by using the -XX:+UseSerialGC. The serial collector is a single-thread collector, while the parallel collector is a multiple-thread collector.</p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="**How to Do JVM Performance Tuning**" dir="auto" class="heading" id="**How_to_Do_JVM_Performance_Tuning**"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>How to Do JVM Performance Tuning</strong></h2><div class="heading-children"><div class="el-p"><p dir="auto">Once you know all of the above, here&nbsp;are the steps you need to take to perform JVM tuning:</p></div><div class="el-h3 heading-wrapper"><h3 data-heading="Measure Memory Footprint" dir="auto" class="heading" id="Measure_Memory_Footprint"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Measure Memory Footprint</h3><div class="heading-children"><div class="el-p"><p dir="auto">To determine the memory usage, you first need to know the size of the active data. The size of the active data is the amount of Java heap that is occupied by data that was active since the application entered the steady stage.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Application Phase: Stable vs. Start-up" dir="auto" class="heading" id="Application_Phase:_Stable_vs._Start-up"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Application Phase: Stable vs. Start-up</h3><div class="heading-children"><div class="el-p"><p dir="auto">Active data has to be measured in a stable state instead of the start-up phase. In the start-up phase, the JVM loads and launches the app’s main modules and data; thus, the JVM parameters are not yet stable.</p></div><div class="el-p"><p dir="auto">On the other hand, the stable phase implies that an app has already been running for some time and underwent a stress test. More specifically, an app is in a stable phase when it reaches a workload that meets the requirements at the business peak in the production environment and stays steady after the peak is reached. Only then every JVM performance parameter is in a stable state.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="How to Determine Memory Footprint" dir="auto" class="heading" id="How_to_Determine_Memory_Footprint"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>How to Determine Memory Footprint</h3><div class="heading-children"><div class="el-p"><p dir="auto">Make sure to perform the tests with the default JVM parameters as it allows you to see how much memory the app requires while in the stable phase. The Full GC</p></div><div class="el-p"><p dir="auto">Once the app is running in a stable state, you have to estimate the memory footprint based on the average old and permanent occupancy, you can see with Full GC logs during stable state periods. You can also use the longest Full GC for estimation.</p></div><div class="el-p"><p dir="auto">GC logs are one of the best ways to gather meaningful and rich data to help with tuning. Enabling GC logs doesn’t affect performance. Therefore you can use them even in production environments to detect issues.</p></div><div class="el-p"><p dir="auto">Use the following command-line to turn on Full GC logs:</p></div><div class="el-pre"><pre class="language-css" tabindex="0"><code data-line="0" class="language-css is-loaded">
<span class="token property">-XX</span><span class="token punctuation">:</span>+PrintGC <span class="token property">-XX</span><span class="token punctuation">:</span>+PrintGCDetails <span class="token property">-XX</span><span class="token punctuation">:</span>+PrintGCTimeStamps <span class="token property">-Xloggc</span><span class="token punctuation">:</span>&lt;filename&gt;

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">However, if there are no Full GC logs available, you can use monitoring tools to call for them or the following command to enable them:</p></div><div class="el-pre"><pre class="language-css" tabindex="0"><code data-line="0" class="language-css is-loaded">jmap <span class="token property">-histo</span><span class="token punctuation">:</span>live pid
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">Either way, you get information similar to:</p></div><div class="el-pre"><pre class="language-css" tabindex="0"><code data-line="0" class="language-css is-loaded">
<span class="token number">0.134</span><span class="token punctuation">:</span> [GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">65536</span>K-&gt;<span class="token number">10720</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">76288</span>K<span class="token punctuation">)</span>] <span class="token number">65536</span>K-&gt;<span class="token number">40488</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">251392</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0190287</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">0.13</span> sys=<span class="token number">0.04</span><span class="token punctuation">,</span> real=<span class="token number">0.02</span> secs]

<span class="token number">0.193</span><span class="token punctuation">:</span> [GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">71912</span>K-&gt;<span class="token number">10752</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">141824</span>K<span class="token punctuation">)</span>] <span class="token number">101680</span>K-&gt;<span class="token number">101012</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">316928</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0357512</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">0.27</span> sys=<span class="token number">0.06</span><span class="token punctuation">,</span> real=<span class="token number">0.04</span> secs]

<span class="token number">0.374</span><span class="token punctuation">:</span> [GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">141824</span>K-&gt;<span class="token number">10752</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">141824</span>K<span class="token punctuation">)</span>] <span class="token number">232084</span>K-&gt;<span class="token number">224396</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">359424</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0809666</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">0.58</span> sys=<span class="token number">0.12</span><span class="token punctuation">,</span> real=<span class="token number">0.08</span> secs]

<span class="token number">0.455</span><span class="token punctuation">:</span> [Full GC <span class="token punctuation">(</span>Ergonomics<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">10752</span>K-&gt;<span class="token number">0</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">141824</span>K<span class="token punctuation">)</span>] [<span class="token property">ParOldGen</span><span class="token punctuation">:</span> <span class="token number">213644</span>K-&gt;<span class="token number">215361</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">459264</span>K<span class="token punctuation">)</span>] <span class="token number">224396</span>K-&gt;<span class="token number">215361</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">601088</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> [<span class="token property">Metaspace</span><span class="token punctuation">:</span> <span class="token number">2649</span>K-&gt;<span class="token number">2649</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">1056768</span>K<span class="token punctuation">)</span>]<span class="token punctuation">,</span> <span class="token number">0.4409247</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">3.46</span> sys=<span class="token number">0.02</span><span class="token punctuation">,</span> real=<span class="token number">0.44</span> secs]

<span class="token number">0.984</span><span class="token punctuation">:</span> [GC <span class="token punctuation">(</span>Allocation Failure<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">131072</span>K-&gt;<span class="token number">10752</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">190464</span>K<span class="token punctuation">)</span>] <span class="token number">346433</span>K-&gt;<span class="token number">321225</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">649728</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.1407158</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">1.28</span> sys=<span class="token number">0.08</span><span class="token punctuation">,</span> real=<span class="token number">0.14</span> secs]

<span class="token number">1.168</span><span class="token punctuation">:</span> [GC <span class="token punctuation">(</span>System.<span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">60423</span>K-&gt;<span class="token number">10752</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">190464</span>K<span class="token punctuation">)</span>] <span class="token number">370896</span>K-&gt;<span class="token number">368961</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">649728</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0676498</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">0.53</span> sys=<span class="token number">0.05</span><span class="token punctuation">,</span> real=<span class="token number">0.06</span> secs]

<span class="token number">1.235</span><span class="token punctuation">:</span> [Full GC <span class="token punctuation">(</span>System.<span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">10752</span>K-&gt;<span class="token number">0</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">190464</span>K<span class="token punctuation">)</span>] [<span class="token property">ParOldGen</span><span class="token punctuation">:</span> <span class="token number">358209</span>K-&gt;<span class="token number">368152</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">459264</span>K<span class="token punctuation">)</span>] <span class="token number">368961</span>K-&gt;<span class="token number">368152</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">649728</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> [<span class="token property">Metaspace</span><span class="token punctuation">:</span> <span class="token number">2652</span>K-&gt;<span class="token number">2652</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">1056768</span>K<span class="token punctuation">)</span>]<span class="token punctuation">,</span> <span class="token number">1.1751101</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">10.64</span> sys=<span class="token number">0.05</span><span class="token punctuation">,</span> real=<span class="token number">1.18</span> secs]

<span class="token number">2.612</span><span class="token punctuation">:</span> [Full GC <span class="token punctuation">(</span>Ergonomics<span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">179712</span>K-&gt;<span class="token number">0</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">190464</span>K<span class="token punctuation">)</span>] [<span class="token property">ParOldGen</span><span class="token punctuation">:</span> <span class="token number">368152</span>K-&gt;<span class="token number">166769</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">477184</span>K<span class="token punctuation">)</span>] <span class="token number">547864</span>K-&gt;<span class="token number">166769</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">667648</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> [<span class="token property">Metaspace</span><span class="token punctuation">:</span> <span class="token number">2659</span>K-&gt;<span class="token number">2659</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">1056768</span>K<span class="token punctuation">)</span>]<span class="token punctuation">,</span> <span class="token number">0.2662589</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">2.14</span> sys=<span class="token number">0.00</span><span class="token punctuation">,</span> real=<span class="token number">0.27</span> secs]

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>We can see several operations performed by our JVM version 8.</strong> Let’s look at one of the lines here that described the Full GC&nbsp;event performed on purpose from our test code by using the System.gc()&nbsp;method:</p></div><div class="el-pre"><pre class="language-css" tabindex="0"><code data-line="0" class="language-css is-loaded">
<span class="token number">1.235</span><span class="token punctuation">:</span> [Full GC <span class="token punctuation">(</span>System.<span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> [<span class="token property">PSYoungGen</span><span class="token punctuation">:</span> <span class="token number">10752</span>K-&gt;<span class="token number">0</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">190464</span>K<span class="token punctuation">)</span>] [<span class="token property">ParOldGen</span><span class="token punctuation">:</span> <span class="token number">358209</span>K-&gt;<span class="token number">368152</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">459264</span>K<span class="token punctuation">)</span>] <span class="token number">368961</span>K-&gt;<span class="token number">368152</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">649728</span>K<span class="token punctuation">)</span><span class="token punctuation">,</span> [<span class="token property">Metaspace</span><span class="token punctuation">:</span> <span class="token number">2652</span>K-&gt;<span class="token number">2652</span><span class="token function">K</span><span class="token punctuation">(</span><span class="token number">1056768</span>K<span class="token punctuation">)</span>]<span class="token punctuation">,</span> <span class="token number">1.1751101</span> secs] [<span class="token property">Times</span><span class="token punctuation">:</span> user=<span class="token number">10.64</span> sys=<span class="token number">0.05</span><span class="token punctuation">,</span> real=<span class="token number">1.18</span> secs]

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>As you can see there is a lot of information in a single line describing the Full GC event.</strong> Apart from the event type we see what was happening in the young generation space [PSYoungGen: 10752K-&gt;0K(190464K)], what was happening in the old generation space, [ParOldGen: 358209K-&gt;368152K(459264K)], what was happening in the Metaspace region of memory [Metaspace: 2652K-&gt;2652K(1056768K)], the total memory difference 368961K-&gt;368152K(649728K)&nbsp;and finally the time the whole operation took: [Times: user=10.64 sys=0.05, real=1.18 secs].</p></div><div class="el-p"><p dir="auto">The information about young generation garbage collector work tells us that after the young generation garbage collection event the space went down from 10752K to 0K and the total allocated young generation space is 190464K.</p></div><div class="el-p"><p dir="auto">The old generation garbage collector started with the memory usage at 358209K and after its work finished with 368152K. The total memory allocated to old generation space is 459264K. This means that this GC cycle didn’t end up freeing too much old generation space.</p></div><div class="el-p"><p dir="auto">After the whole garbage collection was done we ended up with 368152K memory starting from the initial 368961K and the whole memory space occupied was 649728K.</p></div><div class="el-p"><p dir="auto">The Metaspace region of the memory started and ended with the same memory usage 2652K and the whole region occupies 1056768K.</p></div><div class="el-p"><p dir="auto">Finally, it took JVM 1.18 seconds to perform the whole garbage collection operation. The user=10.64 section tells us the amount of CPU time spent in user-mode code outside of the operating system kernel. The sys=0.05 section is the CPU time spent inside the kernel within the process itself, which means how long the CPU spent executing system-related calls.</p></div><div class="el-p"><p dir="auto">As you can see <strong>a single garbage collector log line can give us a lot of insight into what happened, how much memory was released, and how long the whole operation took</strong>.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Tuning for Latency" dir="auto" class="heading" id="Tuning_for_Latency"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Tuning for Latency</h3><div class="heading-children"><div class="el-p"><p dir="auto">Once the memory footprint established, the next step is latency tuning. At this stage, <strong>heap memory size and latency don’t meet application requirements.</strong> Therefore, a new debugging is needed with the actual requirements that the app has. You might have to tune the heap size again, determine GC duration and frequency, and decide if you need to switch to another garbage collector.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Determine System Latency Requirements" dir="auto" class="heading" id="Determine_System_Latency_Requirements"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Determine System Latency Requirements</h3><div class="heading-children"><div class="el-p"><p dir="auto">Previously, we’ve mentioned performance goals, but we didn’t set values for them. These goals serve as system latency requirements you need to meet after tuning. The metrics that help get there are:</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">
<p>&nbsp; Acceptable average Minor GC frequency, which you’ll compare with the number of Minor GCs.</p>
</li>
<li data-line="2" dir="auto">
<p>&nbsp; Acceptable maximum Full GC pause, which you’ll compare with the longest Full GC cycle.</p>
</li>
<li data-line="4" dir="auto">
<p>&nbsp; Acceptable frequency of maximum Full GC pause, which you’ll compare with the highest frequency of the Full GC.</p>
</li>
<li data-line="6" dir="auto">
<p>&nbsp; Acceptable average Minor GC pause, which you’ll compare with the Minor GC duration.</p>
</li>
</ul></div><div class="el-p"><p dir="auto">You can get this data by optimizing the young generation and old generation size, respectively. You can read more about it in our guide to garbage collection tuning.</p></div></div></div><div class="el-h3 heading-wrapper"><h3 data-heading="Tuning for Throughput" dir="auto" class="heading" id="Tuning_for_Throughput"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Tuning for Throughput</h3><div class="heading-children"><div class="el-p"><p dir="auto">In the final step of JVM performance tuning, <strong>we run throughput tests on the results we got so far and then make slight adjustments if needed</strong>.</p></div><div class="el-p"><p dir="auto">Based on tests and overall application requirements, an app should have a set throughput metric. When this goal is met or exceeded even, you can stop the tuning.</p></div><div class="el-p"><p dir="auto">However, if after optimization, you still can’t reach the throughput goal, you need to get back to it and assess the gap between the throughput requirement and the current throughout. If the gap is around 20%, you can change the parameters, increase memory, and debug the application again. However, if the gap is larger than 20%, you need to review the throughput goal as the throughput goal, and the design may not meet the requirements of the whole Java application.</p></div><div class="el-p"><p dir="auto"><strong>For a garbage collection, throughput tuning has two purposes: to minimize the number of objects passed to the old area and decrease Full GC execution time or Stop-the-World events.</strong> These can lead to low throughput.</p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="**Time to Tune!**" dir="auto" class="heading" id="**Time_to_Tune!**"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>Time to Tune!</strong></h2><div class="heading-children"><div class="el-p"><p dir="auto">JVM performance tuning is a complex process that requires a methodical approach and a clear idea of the desired performance outcomes, as you’ve noticed in this JVM tuning guide. The default JVM tunings do a great job of improving application performance and making sure it’s stable in most situations. On the other hand, depending on how your app handles the required workload, the basic initial JVM parameters may not be enough. In that case, you’ll have to benchmark your app and tune the JVM to reach an appropriate set of parameters.</p></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://apps.sematext.com/ui/registration" rel="noopener nofollow" class="external-link" href="https://apps.sematext.com/ui/registration" target="_blank">Start Free Trial</a></p></div><div class="mod-footer mod-ui"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Java Virtual Machine (JVM) Performance Tuning Tutorial - Sematext"><div class="tree-item-contents heading-link" heading-name="Java Virtual Machine (JVM) Performance Tuning Tutorial - Sematext"><span class="tree-item-title">Java Virtual Machine (JVM) Performance Tuning Tutorial - Sematext</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#**What_Is_JVM_Tuning**"><div class="tree-item-contents heading-link" heading-name="**What Is JVM Tuning**"><span class="tree-item-title"><strong>What Is JVM Tuning</strong></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#**App_Optimization_Considers_All_Performance_Layers**"><div class="tree-item-contents heading-link" heading-name="**App Optimization Considers All Performance Layers**"><span class="tree-item-title"><strong>App Optimization Considers All Performance Layers</strong></span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#**What_You_Need_to_Know_Before_Planning_JVM_Performance_Tuning**"><div class="tree-item-contents heading-link" heading-name="**What You Need to Know Before Planning JVM Performance Tuning**"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><strong>What You Need to Know Before Planning JVM Performance Tuning</strong></span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#JVM_Main_Parameters"><div class="tree-item-contents heading-link" heading-name="JVM Main Parameters"><span class="tree-item-title">JVM Main Parameters</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Heap_Memory"><div class="tree-item-contents heading-link" heading-name="Heap Memory"><span class="tree-item-title">Heap Memory</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Out_of_Memory_Error"><div class="tree-item-contents heading-link" heading-name="Out of Memory Error"><span class="tree-item-title">Out of Memory Error</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Garbage_Collection"><div class="tree-item-contents heading-link" heading-name="Garbage Collection"><span class="tree-item-title">Garbage Collection</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#GC_Logging"><div class="tree-item-contents heading-link" heading-name="GC Logging"><span class="tree-item-title">GC Logging</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Other"><div class="tree-item-contents heading-link" heading-name="Other"><span class="tree-item-title">Other</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Set_your_JVM_Performance_Goals"><div class="tree-item-contents heading-link" heading-name="Set your JVM Performance Goals"><span class="tree-item-title">Set your JVM Performance Goals</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#JVM_Tuning_Principles"><div class="tree-item-contents heading-link" heading-name="JVM Tuning Principles"><span class="tree-item-title">JVM Tuning Principles</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#JVM_Tuning_Procedure"><div class="tree-item-contents heading-link" heading-name="JVM Tuning Procedure"><span class="tree-item-title">JVM Tuning Procedure</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#**How_to_Do_JVM_Performance_Tuning**"><div class="tree-item-contents heading-link" heading-name="**How to Do JVM Performance Tuning**"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><strong>How to Do JVM Performance Tuning</strong></span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Measure_Memory_Footprint"><div class="tree-item-contents heading-link" heading-name="Measure Memory Footprint"><span class="tree-item-title">Measure Memory Footprint</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Application_Phase:_Stable_vs._Start-up"><div class="tree-item-contents heading-link" heading-name="Application Phase: Stable vs. Start-up"><span class="tree-item-title">Application Phase: Stable vs. Start-up</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#How_to_Determine_Memory_Footprint"><div class="tree-item-contents heading-link" heading-name="How to Determine Memory Footprint"><span class="tree-item-title">How to Determine Memory Footprint</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Tuning_for_Latency"><div class="tree-item-contents heading-link" heading-name="Tuning for Latency"><span class="tree-item-title">Tuning for Latency</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Determine_System_Latency_Requirements"><div class="tree-item-contents heading-link" heading-name="Determine System Latency Requirements"><span class="tree-item-title">Determine System Latency Requirements</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#Tuning_for_Throughput"><div class="tree-item-contents heading-link" heading-name="Tuning for Throughput"><span class="tree-item-title">Tuning for Throughput</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="02-编程语言\01-java\06-jvm\0001.html#**Time_to_Tune!**"><div class="tree-item-contents heading-link" heading-name="**Time to Tune!**"><span class="tree-item-title"><strong>Time to Tune!</strong></span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>